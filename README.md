# funds
funds


## 基金类型

+ QDII
+ QDII-指数
+ 保本型
+ **债券型**
+ 债券指数
+ 分级杠杆
+ 固定收益
+ 定开债券
+ 混合-FOF
+ **混合型**
+ 联接基金
+ **股票型**
+ 股票指数


## 收益率计算

+ 基金拆分 期间收益率

```javascript
// 基金拆分是指份额增加/减少，单位净值减少/增加，但累计净值不变
// 如果采用累计净值计算收益，则可以不考虑基金拆分的情况
// 如果采用单位净值计算收益，则相当于分红再投资

// m 拆分系数
// M 多次拆分累计系数
M = m1 * m2 * ... * mn

// v2 结束日单位净值
// v1 起始日单位净值
// M 期间累计拆分系数
// R 收益率
R = V2 * M / V1 - 1
  = (v2 * M - v1) / v1
```

+ 分红再投资 期间收益率

```javascript
// h 分红日单位分红
// v 分红日单位净值
// k 分红系数
k = h / v

// V2 结束日单位净值
// V1 起始日单位净值
// k1, k2, ki 期间分红系数
// R 收益率
R = (1 + k1)(1 + k2)...(1 + ki)V2 / V1 - 1
```

+ 现金分红 期间收益率

```javascript
// h 单位分红
// H 成立日至当日的单位分红的累计
H = h1 + h2 + ... + hn

// L2 结束日累计净值
// V2 结束日单位净值
// L1 起始日累计净值
// V1 起始日单位净值
// H 起始日至结束日期间的单位分红的累计
// H0 基金发行日至起始日之前的单位分红的累计
// R 收益率
R = H / V1 + V2 / V1 - 1
  = (H + V2 - V1) / V1        // 单位净值算法
  = (L2 - L1) / (L1 - H0)     // 累计净值算法
```

+ 分红后，单位净值与累计净值计算关系

```javascript
// h 单位分红
// H 成立日至当日的单位分红的累计
H = h1 + h2 + ... + hn

// V1 分红日前一日单位净值
// v2 分红日单位净值
// L2 分红日累计净值
// I2 分红日当日增长率

L2 = V2 + H
I2 = (V2 - V1) / V1
   = (L2 - H - V1) / V1

```

+ 拆分后，单位净值与累计净值计算关系

```javascript
// m 拆分系数
// M 成立日至当日的累计拆分系数
M = m1 * m2 * ... * mn

// V2 拆分日单位净值
// L1 拆分日前一日累计净值
// L2 拆分日累计净值
// I2 拆分日当日增长率
L2 = V2 * M
I2 = (L2 - L1) / L1  // 拆分日的增长率比较特殊

```
