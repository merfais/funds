# funds
funds


## 基金类型

+ QDII
+ QDII-指数
+ 保本型
+ **债券型**
+ 债券指数
+ 分级杠杆
+ 固定收益
+ 定开债券
+ 混合-FOF
+ **混合型**
+ 联接基金
+ **股票型**
+ 股票指数


## 单位净值与累计净值计算

+ 分红后，单位净值与累计净值计算关系

```javascript
// V1 分红日前一日单位净值
// v2 分红日单位净值
// L1 分红日前一日累计净值
// L2 分红日累计净值
// H2 分红日单位分红
// I2 分红日当日增长率

L2 = V2 + H2 - V1 + L1
I2 = (V2 + H2 - V1) / V1
   = (L2 - L1) / V1

// 期间多次分红
// V0 期间起始日的单位净值
// L0 期间起始日的累计净值
// V 期间结束日的单位净值
// L 期间结束日的累计净值
// hi 单位分红
// H 单位分红的累计
H = h1 + h2 + ... + hn
L = L0 + V + H - V0
```

+ 拆分后，单位净值与累计净值计算关系

基金拆分是指份额增加/减少，单位净值减少/增加，但累计净值不变

```javascript
// m 拆分系数
// V2 拆分日单位净值
// V1 拆分日前一日单位净值
// L2 拆分日累计净值
// L1 拆分日前一日累计净值
// I2 拆分日当日增长率
L2 = (V2 * m - V1) + L1
I2 = (V2 * M - V1) / V1
   = (L2 - L1) / V1

// 期间内多次拆分
// V0 期间起始日的单位净值
// L0 期间起始日的累计净值
// V 期间结束日的单位净值
// L 期间结束日的累计净值
// I 期间增长率
// mi 拆分日的拆分系数
// vi 拆分日的单位净值
L = L0 + V - V0 + (m1 - 1)V1 + (m2 - 1)V2 + ... + (mn - 1)vn
```

## 收益率计算

+ 只有基金拆分 期间收益率

```javascript
// m 拆分系数
// M 多次拆分累计系数
M = m1 * m2 * ... * mn

// v2 结束日单位净值
// v1 起始日单位净值
// M 期间累计拆分系数
// R 收益率
R = V2 * M / V1 - 1
  = (v2 * M - v1) / v1
```

+ 只有分红再投资 期间收益率

```javascript
// h 分红日单位分红
// v 分红日单位净值
// k 分红系数
k = h / v

// V2 结束日单位净值
// V1 起始日单位净值
// ki 期间分红系数
// R 收益率
R = (1 + k1)(1 + k2)...(1 + kn)V2 / V1 - 1
```

+ 只有现金分红 期间收益率

```javascript
// h 单位分红
// H 成立日至当日的单位分红的累计
H = h1 + h2 + ... + hn

// L2 结束日累计净值
// V2 结束日单位净值
// L1 起始日累计净值
// V1 起始日单位净值
// H 起始日至结束日期间的单位分红的累计
// H0 基金发行日至起始日之前的单位分红的累计
// R 收益率
R = H / V1 + V2 / V1 - 1      // 单位净值算法
  = (H + V2 - V1) / V1
R = (L2 - L1) / V1            // 累计净值算法
  = (L2 - L1) / (L1 - H0)

```

